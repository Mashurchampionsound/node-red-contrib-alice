<script type="text/javascript">
    RED.nodes.registerType('Color',{
        category: 'alice',
        defaults:{
            device: {value:"", type:"alice-device"},
            name: {value:""},
            scheme: {value:"rgb"},
            response:{value:true}
        },
        inputs:1,
        outputs:1,
        icon: "alice.png",
        color: "#D8BFD8",
        label: function(){
            return this.name + ":Color";
        },
        oneditprepare: function(){
            if (this.response === undefined){
                $( "#node-input-response").prop('checked', true);
            }
        },
        oneditsave: function(){
            deivcename = $('#node-input-device option:selected').text();
            $('#node-input-name').val(deivcename);
        }
    })
</script>

<script type="text/x-red" data-template-name="Color">
    <input type="hidden" id="node-input-name">
    <div class="form-row">
        <label for="node-input-device">Device</label>
        <input id="node-input-device">
    </div>
    <div class="form-row">
        <label for="node-input-scheme">Scheme</label>
        <select id="node-input-scheme" style="width: 70%;">
            <option value="rgb">RGB</option>
            <option value="hsv">HSV</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-response"><i class="fa fa-refresh"></i> <span >Response</span></label>
        <label for="node-input-response" style="width:70%">
        <input type="checkbox" id="node-input-response" style="display:inline-block; width:22px; vertical-align:baseline;" autocomplete="off"><span>Always answer Alice with success</span>
        </label>
    </div>
</script>

<script type="text/x-red" data-help-name="Color">
    <p>Change the color of their luminous elements to any one from the HSV model or from the RGB model;</p>
    
    <h3>Property</h3>
    <dl class="message-properties">
        <dt>Device
            <span class="property-type">Select</span>
        </dt>
        <dd> The device to which this feature is connected </dd>
        <dt>Scheme
            <span class="property-type">Select</span>
        </dt>
        <dd> Color scheme selection (RGB or HSV) </dd>
        <dt>Response
            <span class="property-type">checkbox</span>
        </dt>
        <dd> In order for the device to respond to Alice that the command was successful, the corresponding value should arrive at the input within 2.5 seconds.
            If your device takes longer or doesnâ€™t return a confirmation at all, just check this box. </dd>
    </dl>

    <h3>Inputs</h3>
        <dl class="message-properties">
            <dt>payload
                <span class="property-type">Object || Integer</span>
            </dt>
            <dd> If the color scheme is RGB, then payload must be presented in 24-bit format (<a href="https://ru.wikipedia.org/wiki/TrueColor" target="_blank">TrueColor</a>). </dd>
            <dd> If the color scheme is HSV, then payload HSV Object (hue,saturation,value) </br><i>{h:Integer,s:Integer,v:Integer}</i></dd>
        </dl>
    
     <h3>Outputs</h3>
        <dl class="message-properties">
            <dt>payload
                <span class="property-type">Object || Integer</span>
            </dt>
            <dd> If the color scheme is RGB, then payload must be presented in 24-bit format (<a href="https://ru.wikipedia.org/wiki/TrueColor" target="_blank">TrueColor</a>). </dd>
            <dd> If the color scheme is HSV, then payload HSV Object (hue,saturation,value) </br><i>{h:Integer,s:Integer,v:Integer}</i></dd>
        </dl>
    <h3>References</h3>
        <ul>
            <li><a href="https://yandex.ru/dev/dialogs/alice/doc/smart-home/concepts/color_setting-docpage/"> Yandex documentation</a></li>
        </ul>
</script>